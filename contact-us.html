<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - EireCosán</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    
</head>
<script>
    /**
 * Script to handle form submission status messages after redirection.
 * It reads the 'status' parameter from the URL (?status=success or ?status=error),
 * displays a corresponding message box, and cleans the URL history.
 */
function getQueryParameter(name) {
    // Escapes special characters in the parameter name
    name = name.replace(/[\[\]]/g, '\\$&');
    // Regex to find the parameter in the URL
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(window.location.href);
    
    if (!results) return null;
    if (!results[2]) return '';
    
    // Decode the URL component before returning
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

function displaySubmissionStatus() {
    const status = getQueryParameter('status');
    const container = document.getElementById('statusMessageContainer');
    
    // Ensure the required HTML container exists
    if (!container) return; 

    let message = '';
    let bgColor = '';
    let textColor = '';

    // Check the status provided by the PHP redirect
    if (status === 'success') {
        // You can fetch the name if you passed it in the redirect, 
        message = '✅ Thank you! Your message was successfully delivered.';
        container.style.backgroundColor = '#d4edda'; // Light green background
        container.style.color = '#155724'; // Dark green text
    } else if (status === 'error') {
        message = '❌ Submission Failed. There was an error sending your message. Please try again.';
        container.style.backgroundColor = '#f8d7da'; // Light red background
        container.style.color = '#721c24'; // Dark red text
    } else {
        return; // No relevant status parameter found
    }

    // Apply styles and display the message
    container.innerHTML = message;
    container.style.display = 'block';

    // Automatically hide the message after 5 seconds for a better user experience
    setTimeout(() => {
        container.style.transition = 'opacity 0.5s ease';
        container.style.opacity = '0';
        // Remove the element from the display after the transition
        setTimeout(() => { container.style.display = 'none'; }, 500);
    }, 5000);

    // Quantitative UX Improvement: Clean up the URL
    // This removes the ?status=... from the address bar after the user sees the message.
    if (window.history.replaceState) {
        const cleanUrl = window.location.href.split('?')[0];
        window.history.replaceState({path: cleanUrl}, '', cleanUrl);
    }
}

// Execute the function when the page finishes loading
window.onload = displaySubmissionStatus;
</script>
<body>

    <header>
    </header>

    <section class="page-hero-banner">
        <div class="container">
            <h2>Contact Us</h2>
            <p>We're here to help you every step of the way.</p>
        </div>
    </section>

    <div id="statusMessageContainer" class="container" style="display: none; padding: 1rem; margin-top: -60px; margin-bottom: 20px; border-radius: 8px; text-align: center; font-weight: 600;">
        <!-- Message will be inserted here by JavaScript -->
    </div>

    <section class="contact-content-section">
        <div class="container contact-content-inner">   
            
            <div class="contact-form-card">
                <h3 style="color: var(--color-text-dark); font-weight: 700; margin-bottom: 30px;">Send us a Message</h3>
                <form action="mail_handler.php" method="POST">
                    <div class="form-field">
                        <label for="name">Name *</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-field">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-field">
                        <label for="subject">Subject</label>
                        <input type="text" id="subject" name="subject">
                    </div>
                    <div class="form-field">
                        <label for="message">Message *</label>
                        <textarea id="message" name="message" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-send-message">
                        <span class="material-icons">send</span>
                        Send Message
                    </button>
                </form>
            </div>

            <div class="contact-details-card">
                <div class="details-header">Get in Touch</div>
                
                <div class="contact-detail-item">
                    <div class="detail-icon"><span class="material-icons">place</span></div>
                    <div class="detail-info">
                        <p>Address</p>
                        <p class="text-detail">EireCosán International Limited</p>
                        <p class="text-detail">Dublin, Ireland</p>
                    </div>
                </div>

                <div class="contact-detail-item">
                    <div class="detail-icon"><span class="material-icons">phone</span></div>
                    <div class="detail-info">
                        <p>Phone</p>
                        <p class="text-detail">+353 1 234 5678</p>
                    </div>
                </div>

                <div class="contact-detail-item">
                    <div class="detail-icon"><span class="material-icons">email</span></div>
                    <div class="detail-info">
                        <p>Email</p>
                        <p class="text-detail">info@eirecosan.ie</p>
                    </div>
                </div>

                <div class="social-links-panel">
                    <p>Follow Us</p>
                    <a href="#" aria-label="Facebook" title="Facebook"><img src="https://simpleicons.org/icons/facebook.svg" alt="Facebook"></a>
                    <a href="#" aria-label="Instagram" title="Instagram"><img src="https://simpleicons.org/icons/instagram.svg" alt="Instagram"></a>
                </div>
            </div>
            
        </div>
    </section>

    <footer>
    </footer>

</body>
<script src="script.js"></script>
</html>